import { useState, useEffect, useCallback } from 'react';

// ============================================
// LOTTERY GAME CONFIGURATIONS
// ============================================

const LOTTERY_GAMES = {
  // AUSTRALIA
  saturday_lotto: {
    id: 'saturday_lotto',
    name: 'Saturday Lotto',
    shortName: 'Sat',
    country: 'Australia',
    flag: 'ðŸ‡¦ðŸ‡º',
    currency: 'AUD',
    cost: 1.35,
    mainPool: { count: 6, range: 45 },
    bonusPool: null,
    supplementary: { count: 2, range: 45 },
    drawDays: ['Saturday'],
    drawsPerYear: 52,
    jackpotOdds: 8145060,
    color: 'bg-red-500',
    divisions: [
      { match: '6+0', name: 'Division 1', prize: 4000000, odds: 8145060 },
      { match: '5+1', name: 'Division 2', prize: 25000, odds: 678755 },
      { match: '5+0', name: 'Division 3', prize: 1000, odds: 36689 },
      { match: '4+0', name: 'Division 4', prize: 30, odds: 733 },
      { match: '3+1', name: 'Division 5', prize: 20, odds: 297 },
      { match: '1+2', name: 'Division 6', prize: 15, odds: 144 }
    ]
  },
  monday_lotto: {
    id: 'monday_lotto',
    name: 'Monday Lotto',
    shortName: 'Mon',
    country: 'Australia',
    flag: 'ðŸ‡¦ðŸ‡º',
    currency: 'AUD',
    cost: 1.15,
    mainPool: { count: 6, range: 45 },
    bonusPool: null,
    supplementary: { count: 2, range: 45 },
    drawDays: ['Monday'],
    drawsPerYear: 52,
    jackpotOdds: 8145060,
    color: 'bg-cyan-500',
    divisions: [
      { match: '6+0', name: 'Division 1', prize: 1000000, odds: 8145060 },
      { match: '5+1', name: 'Division 2', prize: 10000, odds: 678755 },
      { match: '5+0', name: 'Division 3', prize: 500, odds: 36689 },
      { match: '4+0', name: 'Division 4', prize: 25, odds: 733 },
      { match: '3+1', name: 'Division 5', prize: 15, odds: 297 },
      { match: '1+2', name: 'Division 6', prize: 10, odds: 144 }
    ]
  },
  wednesday_lotto: {
    id: 'wednesday_lotto',
    name: 'Wednesday Lotto',
    shortName: 'Wed',
    country: 'Australia',
    flag: 'ðŸ‡¦ðŸ‡º',
    currency: 'AUD',
    cost: 1.15,
    mainPool: { count: 6, range: 45 },
    bonusPool: null,
    supplementary: { count: 2, range: 45 },
    drawDays: ['Wednesday'],
    drawsPerYear: 52,
    jackpotOdds: 8145060,
    color: 'bg-indigo-500',
    divisions: [
      { match: '6+0', name: 'Division 1', prize: 1000000, odds: 8145060 },
      { match: '5+1', name: 'Division 2', prize: 10000, odds: 678755 },
      { match: '5+0', name: 'Division 3', prize: 500, odds: 36689 },
      { match: '4+0', name: 'Division 4', prize: 25, odds: 733 },
      { match: '3+1', name: 'Division 5', prize: 15, odds: 297 },
      { match: '1+2', name: 'Division 6', prize: 10, odds: 144 }
    ]
  },
  oz_lotto: {
    id: 'oz_lotto',
    name: 'Oz Lotto',
    shortName: 'Oz',
    country: 'Australia',
    flag: 'ðŸ‡¦ðŸ‡º',
    currency: 'AUD',
    cost: 1.50,
    mainPool: { count: 7, range: 45 },
    bonusPool: null,
    supplementary: { count: 3, range: 45 },
    drawDays: ['Tuesday'],
    drawsPerYear: 52,
    jackpotOdds: 45379620,
    color: 'bg-yellow-500',
    divisions: [
      { match: '7+0', name: 'Division 1', prize: 10000000, odds: 45379620 },
      { match: '6+1', name: 'Division 2', prize: 50000, odds: 3241401 },
      { match: '6+0', name: 'Division 3', prize: 5000, odds: 180078 },
      { match: '5+1', name: 'Division 4', prize: 200, odds: 29602 },
      { match: '5+0', name: 'Division 5', prize: 50, odds: 3430 },
      { match: '4+0', name: 'Division 6', prize: 25, odds: 154 },
      { match: '3+1', name: 'Division 7', prize: 15, odds: 87 }
    ]
  },
  powerball_au: {
    id: 'powerball_au',
    name: 'Powerball',
    shortName: 'PB',
    country: 'Australia',
    flag: 'ðŸ‡¦ðŸ‡º',
    currency: 'AUD',
    cost: 1.60,
    mainPool: { count: 7, range: 35 },
    bonusPool: { count: 1, range: 20, name: 'Powerball' },
    supplementary: null,
    drawDays: ['Thursday'],
    drawsPerYear: 52,
    jackpotOdds: 134490400,
    color: 'bg-purple-500',
    divisions: [
      { match: '7+PB', name: 'Division 1', prize: 20000000, odds: 134490400 },
      { match: '7+0', name: 'Division 2', prize: 200000, odds: 7078442 },
      { match: '6+PB', name: 'Division 3', prize: 10000, odds: 686176 },
      { match: '6+0', name: 'Division 4', prize: 500, odds: 36115 },
      { match: '5+PB', name: 'Division 5', prize: 150, odds: 16943 },
      { match: '5+0', name: 'Division 6', prize: 50, odds: 892 },
      { match: '4+PB', name: 'Division 7', prize: 50, odds: 1173 },
      { match: '3+PB', name: 'Division 8', prize: 20, odds: 188 },
      { match: '2+PB', name: 'Division 9', prize: 10, odds: 66 }
    ]
  },
  set_for_life: {
    id: 'set_for_life',
    name: 'Set for Life',
    shortName: 'SFL',
    country: 'Australia',
    flag: 'ðŸ‡¦ðŸ‡º',
    currency: 'AUD',
    cost: 2.00,
    mainPool: { count: 8, range: 37 },
    bonusPool: null,
    supplementary: { count: 2, range: 37 },
    drawDays: ['Daily'],
    drawsPerYear: 365,
    jackpotOdds: 38608020,
    color: 'bg-green-500',
    isAnnuity: true,
    divisions: [
      { match: '8+0', name: 'Division 1', prize: 20000, prizeType: 'monthly', duration: 240, odds: 38608020 },
      { match: '7+1', name: 'Division 2', prize: 5000, prizeType: 'monthly', duration: 12, odds: 1930401 },
      { match: '7+0', name: 'Division 3', prize: 5000, odds: 75016 },
      { match: '6+1', name: 'Division 4', prize: 200, odds: 20881 },
      { match: '6+0', name: 'Division 5', prize: 50, odds: 1367 },
      { match: '5+1', name: 'Division 6', prize: 25, odds: 825 },
      { match: '5+0', name: 'Division 7', prize: 15, odds: 82 },
      { match: '4+0', name: 'Division 8', prize: 10, odds: 26 }
    ]
  },
  
  // UNITED STATES
  powerball_us: {
    id: 'powerball_us',
    name: 'Powerball',
    shortName: 'PB',
    country: 'USA',
    flag: 'ðŸ‡ºðŸ‡¸',
    currency: 'USD',
    cost: 2.00,
    mainPool: { count: 5, range: 69 },
    bonusPool: { count: 1, range: 26, name: 'Powerball' },
    supplementary: null,
    drawDays: ['Monday', 'Wednesday', 'Saturday'],
    drawsPerYear: 156,
    jackpotOdds: 292201338,
    color: 'bg-red-600',
    divisions: [
      { match: '5+PB', name: 'Jackpot', prize: 20000000, odds: 292201338 },
      { match: '5+0', name: 'Match 5', prize: 1000000, odds: 11688053 },
      { match: '4+PB', name: 'Match 4+PB', prize: 50000, odds: 913129 },
      { match: '4+0', name: 'Match 4', prize: 100, odds: 36525 },
      { match: '3+PB', name: 'Match 3+PB', prize: 100, odds: 14494 },
      { match: '3+0', name: 'Match 3', prize: 7, odds: 580 },
      { match: '2+PB', name: 'Match 2+PB', prize: 7, odds: 701 },
      { match: '1+PB', name: 'Match 1+PB', prize: 4, odds: 92 },
      { match: '0+PB', name: 'Match PB', prize: 4, odds: 38 }
    ]
  },
  mega_millions: {
    id: 'mega_millions',
    name: 'Mega Millions',
    shortName: 'MM',
    country: 'USA',
    flag: 'ðŸ‡ºðŸ‡¸',
    currency: 'USD',
    cost: 5.00,
    mainPool: { count: 5, range: 70 },
    bonusPool: { count: 1, range: 25, name: 'Mega Ball' },
    supplementary: null,
    drawDays: ['Tuesday', 'Friday'],
    drawsPerYear: 104,
    jackpotOdds: 302575350,
    color: 'bg-yellow-600',
    divisions: [
      { match: '5+MB', name: 'Jackpot', prize: 50000000, odds: 302575350 },
      { match: '5+0', name: 'Match 5', prize: 1000000, odds: 12607306 },
      { match: '4+MB', name: 'Match 4+MB', prize: 10000, odds: 931001 },
      { match: '4+0', name: 'Match 4', prize: 500, odds: 38792 },
      { match: '3+MB', name: 'Match 3+MB', prize: 200, odds: 14547 },
      { match: '3+0', name: 'Match 3', prize: 10, odds: 606 },
      { match: '2+MB', name: 'Match 2+MB', prize: 10, odds: 693 },
      { match: '1+MB', name: 'Match 1+MB', prize: 4, odds: 89 },
      { match: '0+MB', name: 'Match MB', prize: 2, odds: 37 }
    ]
  },

  // EUROPE
  euromillions: {
    id: 'euromillions',
    name: 'EuroMillions',
    shortName: 'EM',
    country: 'Europe',
    flag: 'ðŸ‡ªðŸ‡º',
    currency: 'EUR',
    cost: 2.50,
    mainPool: { count: 5, range: 50 },
    bonusPool: { count: 2, range: 12, name: 'Lucky Stars' },
    supplementary: null,
    drawDays: ['Tuesday', 'Friday'],
    drawsPerYear: 104,
    jackpotOdds: 139838160,
    color: 'bg-blue-600',
    divisions: [
      { match: '5+2', name: 'Jackpot', prize: 17000000, odds: 139838160 },
      { match: '5+1', name: 'Match 5+1', prize: 300000, odds: 6991908 },
      { match: '5+0', name: 'Match 5', prize: 50000, odds: 3107515 },
      { match: '4+2', name: 'Match 4+2', prize: 3000, odds: 621503 },
      { match: '4+1', name: 'Match 4+1', prize: 150, odds: 31076 },
      { match: '4+0', name: 'Match 4', prize: 50, odds: 13811 },
      { match: '3+2', name: 'Match 3+2', prize: 50, odds: 14125 },
      { match: '2+2', name: 'Match 2+2', prize: 10, odds: 985 },
      { match: '3+1', name: 'Match 3+1', prize: 10, odds: 706 },
      { match: '3+0', name: 'Match 3', prize: 10, odds: 314 },
      { match: '1+2', name: 'Match 1+2', prize: 6, odds: 188 },
      { match: '2+1', name: 'Match 2+1', prize: 5, odds: 49 },
      { match: '2+0', name: 'Match 2', prize: 4, odds: 22 }
    ]
  },
  eurojackpot: {
    id: 'eurojackpot',
    name: 'Eurojackpot',
    shortName: 'EJ',
    country: 'Europe',
    flag: 'ðŸ‡ªðŸ‡º',
    currency: 'EUR',
    cost: 2.00,
    mainPool: { count: 5, range: 50 },
    bonusPool: { count: 2, range: 12, name: 'Euro Numbers' },
    supplementary: null,
    drawDays: ['Tuesday', 'Friday'],
    drawsPerYear: 104,
    jackpotOdds: 139838160,
    color: 'bg-orange-500',
    divisions: [
      { match: '5+2', name: 'Jackpot', prize: 10000000, odds: 139838160 },
      { match: '5+1', name: 'Match 5+1', prize: 800000, odds: 6991908 },
      { match: '5+0', name: 'Match 5', prize: 100000, odds: 3107515 },
      { match: '4+2', name: 'Match 4+2', prize: 4000, odds: 621503 },
      { match: '4+1', name: 'Match 4+1', prize: 200, odds: 31076 },
      { match: '4+0', name: 'Match 4', prize: 90, odds: 13811 },
